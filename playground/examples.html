<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Velin Examples - Interactive Demo</title>
  <script src="../dist/build/velin-all.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      line-height: 1.6;
      color: #333;
      background: #f5f5f5;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    .sidebar {
      width: 280px;
      background: #2c3e50;
      color: white;
      overflow-y: auto;
      flex-shrink: 0;
    }

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .sidebar-header h1 {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }

    .sidebar-header p {
      font-size: 0.875rem;
      color: rgba(255,255,255,0.7);
    }

    .example-list {
      list-style: none;
    }

    .example-item {
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }

    .example-item:hover {
      background: rgba(255,255,255,0.05);
    }

    .example-item.active {
      background: rgba(255,255,255,0.1);
      border-left-color: #3498db;
    }

    .example-item-title {
      font-weight: 500;
      margin-bottom: 0.125rem;
    }

    .example-item-desc {
      font-size: 0.75rem;
      color: rgba(255,255,255,0.6);
    }

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .toolbar {
      background: white;
      border-bottom: 1px solid #ddd;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .toolbar h2 {
      font-size: 1.25rem;
      color: #2c3e50;
    }

    .toolbar-buttons {
      display: flex;
      gap: 0.5rem;
    }

    .btn {
      padding: 0.5rem 1rem;
      border: 1px solid #ddd;
      background: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.875rem;
      transition: all 0.2s;
    }

    .btn:hover {
      background: #f8f8f8;
    }

    .btn.active {
      background: #3498db;
      color: white;
      border-color: #3498db;
    }

    .content-area {
      flex: 1;
      overflow: hidden;
      display: flex;
    }

    .demo-pane {
      flex: 1;
      overflow: auto;
      padding: 2rem;
      background: white;
    }

    .demo-pane.with-code {
      flex: 1;
      border-right: 1px solid #ddd;
    }

    .code-pane {
      flex: 1;
      overflow: auto;
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 1.5rem;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
      line-height: 1.5;
    }

    .code-pane pre {
      margin: 0;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* Example-specific styles */
    .example-content .error {
      color: #e74c3c;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }

    .example-content .field {
      margin-bottom: 1rem;
    }

    .example-content label {
      display: block;
      margin-bottom: 0.25rem;
      font-weight: 500;
    }

    .example-content input[type="text"],
    .example-content input[type="email"],
    .example-content input[type="password"],
    .example-content input[type="search"],
    .example-content select {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 100%;
      font-size: 1rem;
    }

    .example-content input.invalid {
      border-color: #e74c3c;
    }

    .example-content .success {
      color: #27ae60;
      padding: 1rem;
      background: #e7f5e7;
      border-radius: 4px;
      margin-top: 1rem;
    }

    .example-content button:not(.btn) {
      padding: 0.5rem 1rem;
      border: 1px solid #3498db;
      background: #3498db;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }

    .example-content button:not(.btn):hover {
      background: #2980b9;
    }

    .example-content button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .example-content ul {
      list-style: none;
    }

    .example-content li {
      padding: 0.75rem;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .example-content .tabs {
      display: flex;
      gap: 0.5rem;
      border-bottom: 2px solid #ddd;
      margin-bottom: 1rem;
    }

    .example-content .tabs button {
      padding: 0.75rem 1.5rem;
      border: none;
      background: none;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
    }

    .example-content .tabs button.active {
      border-bottom-color: #3498db;
      font-weight: bold;
    }

    .example-content .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .example-content .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      max-width: 500px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }

    .example-content .accordion-item {
      border: 1px solid #ddd;
      margin-bottom: 0.5rem;
      border-radius: 4px;
      overflow: hidden;
    }

    .example-content .accordion-header {
      width: 100%;
      padding: 1rem;
      border: none;
      background: #f5f5f5;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      text-align: left;
    }

    .example-content .accordion-header:hover {
      background: #ececec;
    }

    .example-content .accordion-content {
      padding: 1rem;
    }

    .example-content .products,
    .example-content .cart {
      margin-bottom: 2rem;
    }

    .example-content .product {
      border: 1px solid #ddd;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 4px;
    }

    .example-content h1, .example-content h2, .example-content h3 {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="container" id="app">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h1>Velin Examples</h1>
        <p>Interactive demos & patterns</p>
      </div>
      <ul class="example-list">
        <li
          vln-loop:example="examples"
          vln-class="{ 'example-item': true, 'active': currentExample === example.id }"
          vln-on:click="currentExample = example.id">
          <div class="example-item-title" vln-text="example.title"></div>
          <div class="example-item-desc" vln-text="example.description"></div>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main">
      <div class="toolbar">
        <h2 vln-text="activeExample.title"></h2>
        <div class="toolbar-buttons">
          <button
            class="btn"
            vln-class="{ 'active': showCode }"
            vln-on:click="showCode = !showCode">
            <span vln-if="!showCode">Show Code</span>
            <span vln-if="showCode">Hide Code</span>
          </button>
          <button class="btn" vln-on:click="resetExample()">Reset</button>
        </div>
      </div>

      <div class="content-area">
        <div
          class="demo-pane example-content"
          vln-class="{ 'with-code': showCode }"
          id="demo-container">
        </div>
        <div class="code-pane" vln-if="showCode">
          <pre vln-text="activeExample.code"></pre>
        </div>
      </div>
    </div>
  </div>

  <script>
    const examples = {
      'form-validation': {
        id: 'form-validation',
        title: 'Form Validation',
        description: 'Complete form with validation',
        code: `<!-- HTML -->
<form vln-on:submit="event.preventDefault(); handleSubmit()">
  <div class="field">
    <label>Email</label>
    <input
      vln-input="email"
      vln-class="{ invalid: touched.email && !isEmailValid }"
      vln-on:blur="touched.email = true"
      type="email" />
    <div vln-if="touched.email && !isEmailValid" class="error">
      Please enter a valid email address
    </div>
  </div>

  <div class="field">
    <label>Password</label>
    <input
      vln-input="password"
      vln-class="{ invalid: touched.password && !isPasswordValid }"
      vln-on:blur="touched.password = true"
      type="password" />
    <div vln-if="touched.password && !isPasswordValid" class="error">
      Password must be at least 8 characters
    </div>
  </div>

  <div class="field">
    <label>
      <input type="checkbox" vln-input="agreed" />
      I agree to the terms and conditions
    </label>
    <div vln-if="touched.agreed && !agreed" class="error">
      You must agree to the terms
    </div>
  </div>

  <button type="submit" vln-attr:disabled="!canSubmit || loading">
    <span vln-if="!loading">Sign Up</span>
    <span vln-if="loading">Creating account...</span>
  </button>

  <div vln-if="success" class="success">
    Account created successfully!
  </div>
</form>

<!-- JavaScript -->
const vln = Velin.bind(container, {
  email: '',
  password: '',
  agreed: false,
  loading: false,
  success: false,
  touched: { email: false, password: false, agreed: false },

  get isEmailValid() {
    return this.email.includes('@') && this.email.includes('.');
  },

  get isPasswordValid() {
    return this.password.length >= 8;
  },

  get canSubmit() {
    return this.isEmailValid && this.isPasswordValid && this.agreed;
  },

  async handleSubmit() {
    this.touched = { email: true, password: true, agreed: true };
    if (!this.canSubmit) return;

    this.loading = true;
    await new Promise(r => setTimeout(r, 1000)); // Simulate API call
    this.success = true;
    this.loading = false;
  }
});`,
        render: (container) => {
          container.innerHTML = `
            <h1>Sign Up</h1>
            <form vln-on:submit="event.preventDefault(); handleSubmit()">
              <div class="field">
                <label>Email</label>
                <input
                  vln-input="email"
                  vln-class="{ invalid: touched.email && !isEmailValid }"
                  vln-on:blur="touched.email = true"
                  type="email"
                />
                <div vln-if="touched.email && !isEmailValid" class="error">
                  Please enter a valid email address
                </div>
              </div>

              <div class="field">
                <label>Password</label>
                <input
                  vln-input="password"
                  vln-class="{ invalid: touched.password && !isPasswordValid }"
                  vln-on:blur="touched.password = true"
                  type="password"
                />
                <div vln-if="touched.password && !isPasswordValid" class="error">
                  Password must be at least 8 characters
                </div>
              </div>

              <div class="field">
                <label>
                  <input type="checkbox" vln-input="agreed" />
                  I agree to the terms and conditions
                </label>
                <div vln-if="touched.agreed && !agreed" class="error">
                  You must agree to the terms
                </div>
              </div>

              <button
                type="submit"
                vln-attr:disabled="!canSubmit || loading">
                <span vln-if="!loading">Sign Up</span>
                <span vln-if="loading">Creating account...</span>
              </button>

              <div vln-if="success" class="success">
                Account created successfully!
              </div>
            </form>
          `;

          return Velin.bind(container, {
            email: '',
            password: '',
            agreed: false,
            loading: false,
            success: false,
            touched: {
              email: false,
              password: false,
              agreed: false
            },

            get isEmailValid() {
              return this.email.includes('@') && this.email.includes('.');
            },

            get isPasswordValid() {
              return this.password.length >= 8;
            },

            get canSubmit() {
              return this.isEmailValid &&
                     this.isPasswordValid &&
                     this.agreed;
            },

            async handleSubmit() {
              this.touched = { email: true, password: true, agreed: true };

              if (!this.canSubmit) return;

              this.loading = true;
              this.success = false;

              // Simulate API call
              await new Promise(resolve => setTimeout(resolve, 1000));

              this.success = true;
              this.email = '';
              this.password = '';
              this.agreed = false;
              this.touched = { email: false, password: false, agreed: false };
              this.loading = false;
            }
          });
        }
      },

      'crud': {
        id: 'crud',
        title: 'CRUD Operations',
        description: 'Create, read, update, delete',
        code: `<!-- HTML -->
<h1>Task Manager</h1>

<form vln-on:submit="event.preventDefault(); addTask()">
  <input vln-input="newTask" placeholder="New task..." />
  <button type="submit">Add</button>
</form>

<ul>
  <li vln-loop:task="tasks">
    <div vln-if="editingId !== task.id">
      <input type="checkbox" vln-input="task.done" />
      <span vln-text="task.text"></span>
      <button vln-on:click="startEdit(task)">Edit</button>
      <button vln-on:click="deleteTask(task.id)">Delete</button>
    </div>

    <div vln-if="editingId === task.id">
      <input vln-input="editText" />
      <button vln-on:click="saveEdit(task)">Save</button>
      <button vln-on:click="cancelEdit()">Cancel</button>
    </div>
  </li>
</ul>

<!-- JavaScript -->
let nextId = 1;

const vln = Velin.bind(container, {
  tasks: [],
  newTask: '',
  editingId: null,
  editText: '',

  addTask() {
    if (this.newTask.trim()) {
      this.tasks.push({
        id: nextId++,
        text: this.newTask,
        done: false
      });
      this.newTask = '';
    }
  },

  deleteTask(id) {
    this.tasks = this.tasks.filter(t => t.id !== id);
  },

  startEdit(task) {
    this.editingId = task.id;
    this.editText = task.text;
  },

  saveEdit(task) {
    task.text = this.editText;
    this.editingId = null;
    this.editText = '';
  },

  cancelEdit() {
    this.editingId = null;
    this.editText = '';
  }
});`,
        render: (container) => {
          let nextId = 1;

          container.innerHTML = `
            <h1>Task Manager</h1>

            <form vln-on:submit="event.preventDefault(); addTask()">
              <input vln-input="newTask" placeholder="New task..." />
              <button type="submit">Add</button>
            </form>

            <ul>
              <li vln-loop:task="tasks">
                <div vln-if="editingId !== task.id">
                  <input type="checkbox" vln-input="task.done" />
                  <span vln-text="task.text"></span>
                  <button vln-on:click="startEdit(task)">Edit</button>
                  <button vln-on:click="deleteTask(task.id)">Delete</button>
                </div>

                <div vln-if="editingId === task.id">
                  <input vln-input="editText" />
                  <button vln-on:click="saveEdit(task)">Save</button>
                  <button vln-on:click="cancelEdit()">Cancel</button>
                </div>
              </li>
            </ul>
          `;

          return Velin.bind(container, {
            tasks: [],
            newTask: '',
            editingId: null,
            editText: '',

            addTask() {
              if (this.newTask.trim()) {
                this.tasks.push({
                  id: nextId++,
                  text: this.newTask,
                  done: false
                });
                this.newTask = '';
              }
            },

            deleteTask(id) {
              this.tasks = this.tasks.filter(t => t.id !== id);
            },

            startEdit(task) {
              this.editingId = task.id;
              this.editText = task.text;
            },

            saveEdit(task) {
              task.text = this.editText;
              this.editingId = null;
              this.editText = '';
            },

            cancelEdit() {
              this.editingId = null;
              this.editText = '';
            }
          });
        }
      },

      'search': {
        id: 'search',
        title: 'Search & Filter',
        description: 'Real-time search with filtering',
        code: `<!-- HTML -->
<input
  vln-input="search"
  placeholder="Search users..."
  type="search"
/>

<div>
  Showing <strong vln-text="filteredUsers.length"></strong>
  of <strong vln-text="users.length"></strong> users
</div>

<ul>
  <li vln-loop:user="filteredUsers">
    <strong vln-text="user.name"></strong>
    - <span vln-text="user.email"></span>
  </li>
</ul>

<!-- JavaScript -->
const vln = Velin.bind(container, {
  search: '',
  users: [
    { name: 'Alice Johnson', email: 'alice@example.com' },
    { name: 'Bob Smith', email: 'bob@example.com' },
    { name: 'Charlie Brown', email: 'charlie@example.com' },
    { name: 'Diana Prince', email: 'diana@example.com' }
  ],

  get filteredUsers() {
    const query = this.search.toLowerCase().trim();
    if (!query) return this.users;

    return this.users.filter(user =>
      user.name.toLowerCase().includes(query) ||
      user.email.toLowerCase().includes(query)
    );
  }
});`,
        render: (container) => {
          container.innerHTML = `
            <input
              vln-input="search"
              placeholder="Search users..."
              type="search"
            />

            <div style="margin: 1rem 0;">
              Showing <strong vln-text="filteredUsers.length"></strong>
              of <strong vln-text="users.length"></strong> users
            </div>

            <ul>
              <li vln-loop:user="filteredUsers">
                <strong vln-text="user.name"></strong>
                - <span vln-text="user.email"></span>
              </li>
            </ul>
          `;

          return Velin.bind(container, {
            search: '',
            users: [
              { name: 'Alice Johnson', email: 'alice@example.com' },
              { name: 'Bob Smith', email: 'bob@example.com' },
              { name: 'Charlie Brown', email: 'charlie@example.com' },
              { name: 'Diana Prince', email: 'diana@example.com' }
            ],

            get filteredUsers() {
              const query = this.search.toLowerCase().trim();
              if (!query) return this.users;

              return this.users.filter(user =>
                user.name.toLowerCase().includes(query) ||
                user.email.toLowerCase().includes(query)
              );
            }
          });
        }
      },

      'modal': {
        id: 'modal',
        title: 'Modal Dialogs',
        description: 'Reusable modal pattern',
        code: `<!-- HTML -->
<button vln-on:click="openModal()">Open Modal</button>

<div
  vln-if="isModalOpen"
  class="modal-overlay"
  vln-on:click="closeModal()">
  <div class="modal-content" vln-on:click="event.stopPropagation()">
    <h2>Modal Title</h2>
    <p vln-text="modalMessage"></p>
    <button vln-on:click="closeModal()">Close</button>
  </div>
</div>

<!-- JavaScript -->
const vln = Velin.bind(container, {
  isModalOpen: false,
  modalMessage: 'This is a modal dialog!',

  openModal() {
    this.isModalOpen = true;
  },

  closeModal() {
    this.isModalOpen = false;
  }
});`,
        render: (container) => {
          container.innerHTML = `
            <button vln-on:click="openModal()">Open Modal</button>

            <div
              vln-if="isModalOpen"
              class="modal-overlay"
              vln-on:click="closeModal()">
              <div class="modal-content" vln-on:click="event.stopPropagation()">
                <h2>Modal Title</h2>
                <p vln-text="modalMessage"></p>
                <button vln-on:click="closeModal()">Close</button>
              </div>
            </div>
          `;

          return Velin.bind(container, {
            isModalOpen: false,
            modalMessage: 'This is a modal dialog!',

            openModal() {
              this.isModalOpen = true;
            },

            closeModal() {
              this.isModalOpen = false;
            }
          });
        }
      },

      'tabs': {
        id: 'tabs',
        title: 'Tabs',
        description: 'Tab navigation component',
        code: `<!-- HTML -->
<div class="tabs">
  <button
    vln-loop:tab="tabs"
    vln-text="tab"
    vln-class="{ active: activeTab === tab }"
    vln-on:click="activeTab = tab">
  </button>
</div>

<div class="tab-content">
  <div vln-if="activeTab === 'Home'">
    <h2>Home</h2>
    <p>Welcome to the home tab!</p>
  </div>

  <div vln-if="activeTab === 'Profile'">
    <h2>Profile</h2>
    <p>Your profile information goes here.</p>
  </div>

  <div vln-if="activeTab === 'Settings'">
    <h2>Settings</h2>
    <p>Adjust your settings here.</p>
  </div>
</div>

<!-- JavaScript -->
const vln = Velin.bind(container, {
  tabs: ['Home', 'Profile', 'Settings'],
  activeTab: 'Home'
});`,
        render: (container) => {
          container.innerHTML = `
            <div class="tabs">
              <button
                vln-loop:tab="tabs"
                vln-text="tab"
                vln-class="{ active: activeTab === tab }"
                vln-on:click="activeTab = tab">
              </button>
            </div>

            <div class="tab-content">
              <div vln-if="activeTab === 'Home'">
                <h2>Home</h2>
                <p>Welcome to the home tab!</p>
              </div>

              <div vln-if="activeTab === 'Profile'">
                <h2>Profile</h2>
                <p>Your profile information goes here.</p>
              </div>

              <div vln-if="activeTab === 'Settings'">
                <h2>Settings</h2>
                <p>Adjust your settings here.</p>
              </div>
            </div>
          `;

          return Velin.bind(container, {
            tabs: ['Home', 'Profile', 'Settings'],
            activeTab: 'Home'
          });
        }
      },

      'accordion': {
        id: 'accordion',
        title: 'Accordion',
        description: 'Expandable/collapsible sections',
        code: `<!-- HTML -->
<div vln-loop:item="items" class="accordion-item">
  <button
    vln-on:click="toggle(item.id)"
    class="accordion-header">
    <span vln-text="item.title"></span>
    <span vln-text="isOpen(item.id) ? '−' : '+'"></span>
  </button>

  <div vln-if="isOpen(item.id)" class="accordion-content">
    <p vln-text="item.content"></p>
  </div>
</div>

<!-- JavaScript -->
const vln = Velin.bind(container, {
  openIds: [],
  items: [
    { id: 1, title: 'Section 1', content: 'Content for section 1' },
    { id: 2, title: 'Section 2', content: 'Content for section 2' },
    { id: 3, title: 'Section 3', content: 'Content for section 3' }
  ],

  isOpen(id) {
    return this.openIds.includes(id);
  },

  toggle(id) {
    if (this.isOpen(id)) {
      this.openIds = this.openIds.filter(i => i !== id);
    } else {
      this.openIds.push(id);
    }
  }
});`,
        render: (container) => {
          container.innerHTML = `
            <div vln-loop:item="items" class="accordion-item">
              <button
                vln-on:click="toggle(item.id)"
                class="accordion-header">
                <span vln-text="item.title"></span>
                <span vln-text="isOpen(item.id) ? '−' : '+'"></span>
              </button>

              <div vln-if="isOpen(item.id)" class="accordion-content">
                <p vln-text="item.content"></p>
              </div>
            </div>
          `;

          return Velin.bind(container, {
            openIds: [],
            items: [
              { id: 1, title: 'Section 1', content: 'Content for section 1' },
              { id: 2, title: 'Section 2', content: 'Content for section 2' },
              { id: 3, title: 'Section 3', content: 'Content for section 3' }
            ],

            isOpen(id) {
              return this.openIds.includes(id);
            },

            toggle(id) {
              if (this.isOpen(id)) {
                this.openIds = this.openIds.filter(i => i !== id);
              } else {
                this.openIds.push(id);
              }
            }
          });
        }
      },

      'cart': {
        id: 'cart',
        title: 'Shopping Cart',
        description: 'Product listing with cart',
        code: `<!-- HTML -->
<h1>Shop</h1>

<div class="products">
  <div vln-loop:product="products" class="product">
    <h3 vln-text="product.name"></h3>
    <p vln-text="'$' + product.price"></p>
    <button vln-on:click="addToCart(product)">Add to Cart</button>
  </div>
</div>

<div class="cart">
  <h2>Cart (<span vln-text="cart.length"></span>)</h2>

  <div vln-if="cart.length">
    <div vln-loop:item="cart">
      <span vln-text="item.name"></span>
      - $<span vln-text="item.price"></span>
      <button vln-on:click="removeFromCart(item)">Remove</button>
    </div>

    <div style="margin-top: 1rem;">
      <strong>Total: $<span vln-text="total"></span></strong>
    </div>
  </div>

  <div vln-if="!cart.length">
    Cart is empty
  </div>
</div>

<!-- JavaScript -->
const vln = Velin.bind(container, {
  products: [
    { id: 1, name: 'Widget', price: 9.99 },
    { id: 2, name: 'Gadget', price: 14.99 },
    { id: 3, name: 'Doohickey', price: 19.99 }
  ],
  cart: [],

  get total() {
    return this.cart.reduce((sum, item) => sum + item.price, 0).toFixed(2);
  },

  addToCart(product) {
    this.cart.push({ ...product });
  },

  removeFromCart(item) {
    const index = this.cart.indexOf(item);
    if (index > -1) {
      this.cart.splice(index, 1);
    }
  }
});`,
        render: (container) => {
          container.innerHTML = `
            <h1>Shop</h1>

            <div class="products">
              <div vln-loop:product="products" class="product">
                <h3 vln-text="product.name"></h3>
                <p vln-text="'$' + product.price"></p>
                <button vln-on:click="addToCart(product)">Add to Cart</button>
              </div>
            </div>

            <div class="cart">
              <h2>Cart (<span vln-text="cart.length"></span>)</h2>

              <div vln-if="cart.length">
                <div vln-loop:item="cart" style="padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                  <span vln-text="item.name"></span>
                  - $<span vln-text="item.price"></span>
                  <button vln-on:click="removeFromCart(item)" style="margin-left: 0.5rem;">Remove</button>
                </div>

                <div style="margin-top: 1rem;">
                  <strong>Total: $<span vln-text="total"></span></strong>
                </div>
              </div>

              <div vln-if="!cart.length">
                Cart is empty
              </div>
            </div>
          `;

          return Velin.bind(container, {
            products: [
              { id: 1, name: 'Widget', price: 9.99 },
              { id: 2, name: 'Gadget', price: 14.99 },
              { id: 3, name: 'Doohickey', price: 19.99 }
            ],
            cart: [],

            get total() {
              return this.cart.reduce((sum, item) => sum + item.price, 0).toFixed(2);
            },

            addToCart(product) {
              this.cart.push({ ...product });
            },

            removeFromCart(item) {
              const index = this.cart.indexOf(item);
              if (index > -1) {
                this.cart.splice(index, 1);
              }
            }
          });
        }
      }
    };

    // Main app state
    const app = Velin.bind(document.getElementById('app'), {
      examples: Object.values(examples),
      currentExample: 'form-validation',
      showCode: false,
      demoState: null,

      get activeExample() {
        return examples[this.currentExample];
      },

      resetExample() {
        const container = document.getElementById('demo-container');
        container.innerHTML = '';

        if (this.demoState) {
          // Cleanup if needed
        }

        this.demoState = this.activeExample.render(container);
        this.showCode = false;
      }
    });

    // Watch for example changes
    let lastExample = app.currentExample;
    setInterval(() => {
      if (app.currentExample !== lastExample) {
        lastExample = app.currentExample;
        app.resetExample();
      }
    }, 100);

    // Initial render
    app.resetExample();
  </script>
</body>
</html>
